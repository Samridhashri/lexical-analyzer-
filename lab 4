#include <stdio.h>
#include <string.h>
#include <stdlib.h>

#define MAX 100

// Function to eliminate immediate left recursion
void eliminateLeftRecursion(char production[]) {
    char nonTerminal = production[0];
    char alpha[MAX], beta[MAX];
    int i, j = 0, k = 0;
    int flag = 0;

    // Split production
    for (i = 3; i < strlen(production); i++) {
        if (production[i] == '|') {
            j = 0;
            continue;
        }

        if (production[i] == nonTerminal) {
            flag = 1;
            i++;
            while (production[i] != '|' && production[i] != '\0')
                alpha[k++] = production[i++];
            alpha[k] = '\0';
            i--;
        } else {
            while (production[i] != '|' && production[i] != '\0')
                beta[j++] = production[i++];
            beta[j] = '\0';
            i--;
        }
    }

    if (flag == 0) {
        printf("No Left Recursion detected.\n");
        return;
    }

    printf("\nAfter Eliminating Left Recursion:\n");
    printf("%c -> %s%c'\n", nonTerminal, beta, nonTerminal);
    printf("%c' -> %s%c' | e\n", nonTerminal, alpha, nonTerminal);
}

// Function for left factoring
void leftFactoring(char production[]) {
    char nonTerminal = production[0];
    char first[MAX], second[MAX];
    int i = 3, j = 0, k = 0;

    // Extract first production
    while (production[i] != '|' && production[i] != '\0')
        first[j++] = production[i++];
    first[j] = '\0';

    i++; // skip '|'

    // Extract second production
    while (production[i] != '\0')
        second[k++] = production[i++];
    second[k] = '\0';

    // Find common prefix
    char prefix[MAX];
    int p = 0;
    while (first[p] == second[p] && first[p] != '\0')
        p++;
